<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.odtn.owner.dao.mapper.OwnerMapper">
	<select id="login" parameterType="java.util.Map"
		resultType="com.odtn.owner.dto.OwnerDto">
		select * from owner where owner_key = #{owner_key} and
		user_num = #{user_num}
	</select>


	<select id="countOwnerKey" parameterType="long"
		resultType="String">
		select nvl(count(*), 0) from owner where owner_key =
		#{owner_key}
	</select>

	<select id="getOwnerData" parameterType="long"
		resultType="com.odtn.owner.dto.OwnerMainPageDto">
		select m.user_name, c.camp_name, c.address, c.hp, c.camp_link
		from owner o, member m , camp_data c
		where o.user_num = m.user_num and o.camp_id = c.camp_id
		and o.owner_key =
		#{owner_key}
	</select>

	<select id="getReservationList" parameterType="java.util.Map"
		resultType="com.odtn.reservation.dto.ReservationDto">
		select * from reservation where camp_id = #{camp_id} and camp_site_type = #{fee_name}
	</select>
	
	<select id="getReservationCountMap" parameterType="int" resultType="java.util.Map">
		select camp_site_type as title, nvl(count(*), 0) as result from reservation 
		where camp_id = #{camp_id} GROUP BY camp_site_type
	</select>
</mapper>